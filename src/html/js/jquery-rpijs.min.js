jQuery.extend({stringify:function stringify(e){if("JSON" in window){return JSON.stringify(e)}var d=typeof(e);if(d!="object"||e===null){if(d=="string"){e='"'+e+'"'}return String(e)}else{var f,b,c=[],a=(e&&e.constructor==Array);for(f in e){b=e[f];d=typeof(b);if(e.hasOwnProperty(f)){if(d=="string"){b='"'+b+'"'}else{if(d=="object"&&b!==null){b=jQuery.stringify(b)}}c.push((a?"":'"'+f+'":')+String(b))}}return(a?"[":"{")+String(c)+(a?"]":"}")}}});if(window.MozWebSocket){window.WebSocket=window.MozWebSocket}(function(a,e){a.rpijs={};a.rpijs.rates={};a.rpijs.defaults={update:0,rate:false,format:[]};a.rpijs.formatDefaults={key:[],rate:false,valueType:"none",decimals:2};a.rpijs.init=function(g,h,f){a.rpijs.apiUrl=g;a.rpijs.username=h;a.rpijs.password=f};var b=function(){return"Basic "+btoa(a.rpijs.username+":"+a.rpijs.password)};a.rpijs.get=function(g,i,f){var h=a.extend({},a.rpijs.defaults,f);if(h.rate){c(g,i,f);return}a.ajax({url:a.rpijs.apiUrl+g,headers:{Authorization:b()}}).done(function(k){var j=i(d(k,g,f));if(j&&h.update!=0){setTimeout(function(){a.rpijs.get(g,i,f)},h.update)}})};a.rpijs.post=function(f,g,h){return a.ajax({url:a.rpijs.apiUrl+f,headers:{Authorization:b()},type:"POST",data:a.stringify(g),contentType:"application/json"}).done(h)};a.rpijs.websocket=function(f,i){if(window.WebSocket===e){return e}var h="";if(location.protocol=="https:"){h+="wss://"}else{h+="ws://"}h+=location.host+location.pathname+a.rpijs.apiUrl+f;document.cookie="RPiAuthorization="+b();var g=new WebSocket(h);if(i!==e){g.onmessage=function(j){i(a.parseJSON(j.data))}}return g};var d=function(f,i,h){var j=a.extend({},a.rpijs.defaults,h);if(typeof f!=="object"){var k=a.extend({},a.rpijs.formatDefaults,j.format[0]);if(typeof f==="number"&&k.rate){f=(f-a.rpijs.rates[i].object)/(a.now()-a.rpijs.rates[i].time)*1000}return a.rpijs.parseNumber(f,j.format[0])}var g=a.extend(true,{},f);a.each(j.format,function(m,q){var r=a.extend({},a.rpijs.formatDefaults,q);var p=g;var o;for(o=0;o<r.key.length-1;o++){p=p[r.key[o]]}var n=r.key[o];if(typeof p[n]==="number"&&r.rate){var l=a.rpijs.rates[i].object;a.each(r.key,function(s,t){l=l[t]});p[n]=(p[n]-l)/(a.now()-a.rpijs.rates[i].time)*1000}p[n]=a.rpijs.parseNumber(p[n],q)});return g};a.rpijs.parseNumber=function(q,h){var g=a.extend({},a.rpijs.formatDefaults,h);if(typeof q!=="number"||g.valueType==="none"){return q}else{var k,n;if(g.valueType=="decimal"){k=1000;n=["B","kB","MB","GB","TB","PB","EB","ZB","YB"]}else{if(g.valueType=="binary"){k=1024;n=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]}else{if(g.valueType=="time"){var p=q;var m="";if(p>60){var j=Math.floor(p/60);p=p%60;if(j>60){var o=Math.floor(j/60);j=j%60;if(o>24){m+=Math.floor(o/24)+" days ";o=o%24}m+=o+" hours "}m+=j+" min "}m+=p.toFixed(g.decimals)+" s";return m}else{return q.toFixed(g.decimals)}}}var f="";if(g.rate){f="/s"}var l=0;while(q>=k){q/=k;l++}return q.toFixed(g.decimals)+" "+n[l]+f}};var c=function(g,j,f){var i=a.extend({},a.rpijs.defaults,f);var h={update:0,rate:false,format:[{key:[],rate:false,valueType:"none"}]};a.rpijs.get(g,function(l){if(a.rpijs.rates[g]===e){setTimeout(function(){c(g,j,f)},500)}else{var k=j(d(l,g,f));if(k&&i.update!=0){setTimeout(function(){c(g,j,f)},i.update)}}a.rpijs.rates[g]={object:l,time:a.now()}},h)};a.fn.rpijs=function(g,f){return this.each(function(){var h=this;a.rpijs.get(g,function(i){if(typeof i==="object"){i=JSON.stringify(i)}a(h).html(i);return true},f)})}}(jQuery));